% Matlab code implementation attempt of Astrom 1995

% Testing basics
exa

switch example
    case 1
        % Example 1
        A = [-1 1 0; 0 -1 1; 0 0 -1];
        B = [0 ; 0 ; 1 ];
        C = [1 0 0];
    case 2
        % Example 2
        A = [0 1 1; 0 -1 6; 0 0 -1];
        B = [1; 6; 6];
        C = [1 0 0 ];
    case 3
        disp('No state space matrices given')
        return
    case 4
        % Example 4
        A = [0 1; -1 0];
        B = [0;1];
        C = [11 0];
        
end


epsilon = 0;
d = 1;

N = 5000;
h = linspace(0,50,N);
%f = zeros(1,N);
%df = f;

for i = 1:N
    f(i) = eqtn2_3(h(i), A, B, C);
    %df(i) = deqtn2_3(h(i), A2, B2, C2);
end

%plot(h, f,h,df)
plot(h,f)
xlabel('h')
ylabel('f(h)')
grid on
I = legend('$f(h)$', '$\frac{df(h)}{dh}$')
set(I, 'Interpreter','Latex')


%
% fun = @(x) eqtn2_3(x,A2,B2,C2);
%
% x = fminbnd(fun, 1e-2,1e2)






